(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5080:function(e,t,r){Promise.resolve().then(r.bind(r,624)),Promise.resolve().then(r.t.bind(r,4742,23)),Promise.resolve().then(r.bind(r,7960))},1897:function(e,t,r){"use strict";r.d(t,{x:function(){return u},P:function(){return l}});var n=r(7437),a=r(2265);class s{async query(e,t){let r=await fetch("".concat(this.baseUrl,"/api/agents/v1/query"),{method:"POST",headers:{"X-API-Key":this.apiKey,"Content-Type":"application/json"},body:JSON.stringify({query:e,...t})});if(!r.ok){let e=await r.text();throw Error("Query failed: ".concat(r.statusText," - ").concat(e))}return r.json()}async searchSignals(e,t){let r=new URLSearchParams({query:e});(null==t?void 0:t.source)&&r.append("source",t.source),(null==t?void 0:t.customer)&&r.append("customer",t.customer),(null==t?void 0:t.feature)&&r.append("feature",t.feature);let n=await fetch("".concat(this.baseUrl,"/api/agents/v1/signals?").concat(r),{headers:{"X-API-Key":this.apiKey}});if(!n.ok)throw Error("Search failed: ".concat(n.statusText));return n.json()}async getCustomerProfile(e){let t=await fetch("".concat(this.baseUrl,"/api/agents/v1/customer/").concat(encodeURIComponent(e)),{headers:{"X-API-Key":this.apiKey}});if(!t.ok)throw Error("Failed to get customer profile: ".concat(t.statusText));return t.json()}async getOpportunities(e){let t=new URLSearchParams;(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.minConfidence)&&t.append("minConfidence",e.minConfidence.toString());let r=await fetch("".concat(this.baseUrl,"/api/agents/v1/opportunities?").concat(t),{headers:{"X-API-Key":this.apiKey}});if(!r.ok)throw Error("Failed to get opportunities: ".concat(r.statusText));return r.json()}saveConversation(e){let t=this.getConversations(),r=t.findIndex(t=>t.id===e.id);r>=0?t[r]=e:t.push(e),localStorage.setItem("pm_conversations",JSON.stringify(t))}getConversations(){let e=localStorage.getItem("pm_conversations");if(!e)return[];try{return JSON.parse(e).map(e=>({...e,created_at:new Date(e.created_at),updated_at:new Date(e.updated_at),messages:e.messages.map(e=>({...e,timestamp:new Date(e.timestamp)}))}))}catch(e){return[]}}getConversation(e){return this.getConversations().find(t=>t.id===e)||null}deleteConversation(e){let t=this.getConversations().filter(t=>t.id!==e);localStorage.setItem("pm_conversations",JSON.stringify(t))}createEventStream(e,t){let r=new EventSource("".concat(this.baseUrl,"/api/agents/v1/events/stream?apiKey=").concat(this.apiKey));return r.addEventListener("signal.ingested",t=>{try{let r=JSON.parse(t.data);e({type:"signal.ingested",data:r})}catch(e){console.error("Failed to parse SSE event:",e)}}),r.addEventListener("extraction.corrected",t=>{try{let r=JSON.parse(t.data);e({type:"extraction.corrected",data:r})}catch(e){console.error("Failed to parse SSE event:",e)}}),r.onerror=e=>{console.error("SSE connection error:",e),t&&t(Error("SSE connection failed"))},r}async testConnection(){try{return(await fetch("".concat(this.baseUrl,"/api/health"),{headers:{"X-API-Key":this.apiKey}})).ok}catch(e){return!1}}constructor(e,t){this.apiKey=e,this.baseUrl=t||"http://localhost:3000"}}var i=r(5863),o=r(4001);let c=(0,a.createContext)({apiClient:null,apiKey:null,setApiKey:()=>{},clearApiKey:()=>{}});function l(){return(0,a.useContext)(c)}function u(e){let{children:t}=e,[r,o]=(0,a.useState)(null),[l,u]=(0,a.useState)(null),[m,h]=(0,a.useState)(!0),[p,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("pm_api_key");if(e){o(e);let t=new s(e);u(t),t.testConnection().then(e=>{e||f("Failed to connect to API. Please check your API key."),h(!1)})}else h(!1)},[]);let y=e=>{localStorage.setItem("pm_api_key",e),o(e),u(new s(e)),f(null)},x=()=>{localStorage.removeItem("pm_api_key"),o(null),u(null)};return m?(0,n.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,n.jsx)(i.Z,{className:"h-8 w-8 animate-spin text-primary"})}):r&&l?p?(0,n.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,n.jsxs)("div",{className:"w-full max-w-md rounded-lg border border-red-200 bg-red-50 p-6 text-center",children:[(0,n.jsx)("p",{className:"mb-4 text-red-800",children:p}),(0,n.jsx)("button",{onClick:x,className:"rounded-lg bg-red-600 px-4 py-2 text-white hover:bg-red-700",children:"Try Different API Key"})]})}):(0,n.jsx)(c.Provider,{value:{apiClient:l,apiKey:r,setApiKey:y,clearApiKey:x},children:t}):(0,n.jsx)(d,{onLogin:y})}function d(e){let{onLogin:t}=e,[r,i]=(0,a.useState)(""),[c,l]=(0,a.useState)(""),u=async e=>{if(e.preventDefault(),!r.trim()){l("Please enter an API key");return}let n=new s(r);if(!await n.testConnection()){l("Invalid API key or unable to connect to server");return}t(r)};return(0,n.jsx)("div",{className:"flex h-screen items-center justify-center bg-gray-50",children:(0,n.jsxs)("div",{className:"w-full max-w-md rounded-lg border bg-white p-8 shadow-lg",children:[(0,n.jsxs)("div",{className:"mb-6 text-center",children:[(0,n.jsx)("div",{className:"mb-4 flex justify-center",children:(0,n.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-primary/10",children:(0,n.jsx)(o.Z,{className:"h-8 w-8 text-primary"})})}),(0,n.jsx)("h1",{className:"mb-2 text-2xl font-semibold text-gray-900",children:"PM Intelligence"}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:"Enter your API key to get started"})]}),(0,n.jsxs)("form",{onSubmit:u,className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{htmlFor:"apiKey",className:"mb-2 block text-sm font-medium text-gray-700",children:"API Key"}),(0,n.jsx)("input",{id:"apiKey",type:"password",value:r,onChange:e=>{i(e.target.value),l("")},placeholder:"Enter your API key...",className:"w-full rounded-lg border border-gray-300 px-4 py-2 focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/20"}),c&&(0,n.jsx)("p",{className:"mt-2 text-sm text-red-600",children:c})]}),(0,n.jsx)("button",{type:"submit",className:"w-full rounded-lg bg-primary px-4 py-2 text-white transition-colors hover:bg-primary/90",children:"Connect"})]}),(0,n.jsxs)("div",{className:"mt-6 text-center text-xs text-gray-500",children:[(0,n.jsx)("p",{children:"Don't have an API key?"}),(0,n.jsx)("p",{className:"mt-1",children:"Contact your administrator or check the backend API documentation."})]})]})})}},624:function(e,t,r){"use strict";r.d(t,{ClientProviders:function(){return s}});var n=r(7437),a=r(1897);function s(e){let{children:t}=e;return(0,n.jsx)(a.x,{children:t})}},9763:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var n=r(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),i=(e,t)=>{let r=(0,n.forwardRef)((r,i)=>{let{color:o="currentColor",size:c=24,strokeWidth:l=2,absoluteStrokeWidth:u,className:d="",children:m,...h}=r;return(0,n.createElement)("svg",{ref:i,...a,width:c,height:c,stroke:o,strokeWidth:u?24*Number(l)/Number(c):l,className:["lucide","lucide-".concat(s(e)),d].join(" "),...h},[...t.map(e=>{let[t,r]=e;return(0,n.createElement)(t,r)}),...Array.isArray(m)?m:[m]])});return r.displayName="".concat(e),r}},4001:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]])},5863:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});let n=(0,r(9763).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7960:function(e,t,r){"use strict";r.r(t),t.default="ac2353319419"},4742:function(e){e.exports={style:{fontFamily:"'__Inter_f367f3', '__Inter_Fallback_f367f3'",fontStyle:"normal"},className:"__className_f367f3"}}},function(e){e.O(0,[540,971,117,744],function(){return e(e.s=5080)}),_N_E=e.O()}]);